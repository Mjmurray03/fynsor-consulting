# Domain Setup Guide for Fynsor Consulting

## Overview
This guide provides step-by-step instructions for configuring the custom domain `fynsor.com` for the Fynsor Consulting website hosted on Vercel.

## Prerequisites
- Vercel account with deployment access
- Domain registrar access (where fynsor.com is registered)
- DNS management access

## Step 1: Domain Verification in Vercel

### 1.1 Add Domain to Vercel Project
```bash
# Using Vercel CLI
vercel domains add fynsor.com

# Or use the Vercel dashboard:
# 1. Go to https://vercel.com/dashboard
# 2. Select your project
# 3. Go to Settings > Domains
# 4. Add "fynsor.com"
```

### 1.2 Verify Domain Ownership
Vercel will provide a TXT record for domain verification:
```
TXT record:
Name: _vercel
Value: vc-domain-verify=fynsor.com,XXXXXXXXXXXXXXXX
```

## Step 2: DNS Configuration

### 2.1 Required DNS Records
Configure the following DNS records with your domain registrar:

#### A Records (Root Domain)
```
Type: A
Name: @
Value: 76.76.19.61
TTL: 300
```

#### CNAME Records (Subdomains)
```
Type: CNAME
Name: www
Value: cname.vercel-dns.com
TTL: 300
```

#### Verification Record
```
Type: TXT
Name: _vercel
Value: vc-domain-verify=fynsor.com,XXXXXXXXXXXXXXXX
TTL: 300
```

### 2.2 Email Configuration (Optional)
If you plan to use email with this domain:

#### MX Records
```
Type: MX
Name: @
Value: 10 mail.fynsor.com
TTL: 3600
```

#### SPF Record
```
Type: TXT
Name: @
Value: v=spf1 include:_spf.google.com ~all
TTL: 3600
```

#### DKIM Record (Google Workspace)
```
Type: TXT
Name: google._domainkey
Value: [Generated by Google Workspace]
TTL: 3600
```

#### DMARC Record
```
Type: TXT
Name: _dmarc
Value: v=DMARC1; p=quarantine; rua=mailto:dmarc@fynsor.com
TTL: 3600
```

## Step 3: SSL Certificate Configuration

### 3.1 Automatic SSL (Recommended)
Vercel automatically provisions SSL certificates for custom domains:
- Uses Let's Encrypt certificates
- Automatic renewal
- No configuration required

### 3.2 Custom SSL Certificate (Enterprise)
For enterprise SSL certificates:
```bash
# Upload custom certificate via Vercel CLI
vercel certs add fynsor.com certificate.crt private.key
```

## Step 4: Security Headers Configuration

### 4.1 HSTS Preload Registration
After SSL is active, register for HSTS preload:
1. Visit https://hstspreload.org/
2. Enter `fynsor.com`
3. Check that HSTS header is properly configured
4. Submit for preload list inclusion

### 4.2 CAA Records (Certificate Authority Authorization)
```
Type: CAA
Name: @
Value: 0 issue "letsencrypt.org"
TTL: 3600

Type: CAA
Name: @
Value: 0 issuewild "letsencrypt.org"
TTL: 3600

Type: CAA
Name: @
Value: 0 iodef "mailto:security@fynsor.com"
TTL: 3600
```

## Step 5: Subdomain Configuration

### 5.1 WWW Subdomain
Already configured with CNAME record above.

### 5.2 Additional Subdomains (Optional)
```
# API subdomain
Type: CNAME
Name: api
Value: cname.vercel-dns.com
TTL: 300

# Staging subdomain
Type: CNAME
Name: staging
Value: cname.vercel-dns.com
TTL: 300

# Admin subdomain
Type: CNAME
Name: admin
Value: cname.vercel-dns.com
TTL: 300
```

## Step 6: Domain Aliases in Vercel

### 6.1 Configure Domain Aliases
```bash
# Set up domain aliases
vercel alias fynsor-consulting.vercel.app fynsor.com
vercel alias fynsor-consulting.vercel.app www.fynsor.com
```

### 6.2 Redirect Configuration
Ensure `next.config.js` includes proper redirects:
```javascript
async redirects() {
  return [
    {
      source: '/:path*',
      has: [
        {
          type: 'host',
          value: 'www.fynsor.com',
        },
      ],
      destination: 'https://fynsor.com/:path*',
      permanent: true,
    },
  ];
}
```

## Step 7: Testing and Verification

### 7.1 DNS Propagation Check
```bash
# Check DNS propagation
nslookup fynsor.com
dig fynsor.com
dig www.fynsor.com

# Online tools:
# - https://www.whatsmydns.net/
# - https://dnschecker.org/
```

### 7.2 SSL Certificate Verification
```bash
# Check SSL certificate
openssl s_client -connect fynsor.com:443 -servername fynsor.com

# Online tools:
# - https://www.ssllabs.com/ssltest/
# - https://www.sslchecker.com/
```

### 7.3 Security Headers Test
```bash
# Test security headers
curl -I https://fynsor.com

# Online tools:
# - https://securityheaders.com/
# - https://observatory.mozilla.org/
```

### 7.4 Performance Testing
```bash
# Test site performance
curl -w "@curl-format.txt" -o /dev/null -s "https://fynsor.com"

# Online tools:
# - https://pagespeed.web.dev/
# - https://gtmetrix.com/
# - https://webpagetest.org/
```

## Step 8: Monitoring Setup

### 8.1 Uptime Monitoring
Set up monitoring for:
- https://fynsor.com
- https://www.fynsor.com
- https://fynsor.com/api/health

### 8.2 DNS Monitoring
Monitor DNS records for changes and ensure they remain correct.

### 8.3 SSL Certificate Monitoring
Monitor SSL certificate expiration and renewal.

## Step 9: Backup Domain Configuration

### 9.1 DNS Record Backup
Document all DNS records for disaster recovery:
```
# Backup current DNS configuration
dig fynsor.com ANY > dns-backup-$(date +%Y%m%d).txt
```

### 9.2 Alternative DNS Providers
Consider setting up secondary DNS providers:
- Cloudflare
- AWS Route 53
- Google Cloud DNS

## Troubleshooting

### Common Issues

#### 1. DNS Not Propagating
- Check TTL values (lower = faster propagation)
- Wait 24-48 hours for full global propagation
- Use multiple DNS checking tools

#### 2. SSL Certificate Issues
- Ensure DNS is properly configured first
- Check for CAA records blocking certificate issuance
- Contact Vercel support if automatic SSL fails

#### 3. Domain Not Connecting
- Verify A and CNAME records are correct
- Check for conflicting DNS records
- Ensure domain is verified in Vercel

#### 4. Email Not Working
- Verify MX records are correct
- Check SPF/DKIM/DMARC configuration
- Test email delivery

### Support Contacts
- Vercel Support: https://vercel.com/support
- Domain Registrar Support: [Your registrar's support]
- DNS Provider Support: [Your DNS provider's support]

## Security Considerations

### 1. Domain Security
- Enable domain lock at registrar
- Use strong registrar account passwords
- Enable 2FA on registrar account

### 2. DNS Security
- Use DNSSEC if supported
- Monitor for unauthorized DNS changes
- Regular DNS record audits

### 3. Certificate Security
- Monitor certificate transparency logs
- Set up alerts for certificate changes
- Regular security header audits

## Maintenance Schedule

### Daily
- Monitor uptime and performance
- Check error logs

### Weekly
- Review DNS records
- Check SSL certificate status
- Performance optimization review

### Monthly
- Security headers audit
- DNS provider review
- Backup verification

### Quarterly
- Full security assessment
- DNS provider performance review
- Disaster recovery testing

## Documentation References

- [Vercel Custom Domains Documentation](https://vercel.com/docs/concepts/projects/custom-domains)
- [DNS Best Practices](https://tools.ietf.org/html/rfc1034)
- [SSL/TLS Best Practices](https://wiki.mozilla.org/Security/Server_Side_TLS)
- [Security Headers Guide](https://securityheaders.com/)

---

**Last Updated**: [Current Date]
**Version**: 1.0
**Maintained by**: Fynsor IT Team